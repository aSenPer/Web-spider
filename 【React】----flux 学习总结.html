<p><span style="font-size: 16px;">flux：</span><br><span style="font-size: 16px;"> 　　脚手架安装：</span><br><span
    style="font-size: 16px;"> 　　cnpm install create-react-app</span><br><span style="font-size: 16px;">
    　　create-react-app my-demo</span><br><span style="font-size: 16px;"> 　　安装路由dom</span><br><span
    style="font-size: 16px;"> 　　cnpm install react-router-dom --save-dev</span><br><span style="font-size: 16px;">
    　　cnpm install flux --save-dev</span><br><span style="font-size: 16px;"> 1、是一种构架思想，专门解决软件的结构问题</span><br><span
    style="font-size: 16px;"> 2、基本概念：</span><br><span style="font-size: 16px;"> 　　1、四部分组成</span><br><span
    style="font-size: 16px;"> 　　　　view：视图层</span><br><span style="font-size: 16px;"> 　　　　action：视图发出的动作</span><br><span
    style="font-size: 16px;"> 　　　　dispatcher：接收action 执行回调</span><br><span style="font-size: 16px;">
    　　　　store：存放数据，一旦发生改变就（events中的emit、on）提醒view更新页面</span><br><span style="font-size: 16px;"> 2、<span
      style="color: #ff0000;"><strong>执行流程：</strong></span></span><br><span style="font-size: 16px;">
    　　用户访问view，发出动作action，dispatcher接收到action，store通过事件更改数据，更改完毕后通过events中的emit���on通知view层更新页面</span><br><span
    style="font-size: 16px;"> 3、代码操作流程</span><br><span style="font-size: 16px;"> 　　<span
      style="color: #ff0000;">1、创建store仓库，<span style="color: #333333;">从events模块引入emit
        on方法</span></span></span><br><span style="font-size: 16px;"> 　　　　import EventEmitter from
    'events'</span><br><span style="font-size: 16px;"> 　　　　<span style="color: #ff0000;">合并对象</span></span><br><span
    style="font-size: 16px;"> 　　　　const Store = Object.assign({},EventEmitter.pototype,{</span><br><span
    style="font-size: 16px;"> 　　　　state:{}存放数据</span><br><span style="font-size: 16px;"> 　　　　　　getState(){}
    获取数据</span><br><span style="font-size: 16px;"> 　　　　})</span><br><span style="font-size: 16px;"> 　　　　export default
    Store 导出Store</span><br><span style="font-size: 16px;"> 　　　　view中引入Store</span><br><span style="font-size: 16px;">
    　　　　this.state=Store.getState()</span></p>
<p><span style="font-size: 16px;">              <img
      src="https://img2018.cnblogs.com/blog/1524685/201811/1524685-20181101103628406-2028956431.png" alt width="630"
      height="534"></span></p>
<p><span style="font-size: 16px;"> 　　<span style="color: #ff0000;">2、view 触发事件 发出action</span></span><br><span
    style="font-size: 16px;"> 　　　　const action={</span><br><span style="font-size: 16px;">
    　　　　　　type:'',</span><br><span style="font-size: 16px;"> 　　　　　　value:''</span><br><span style="font-size: 16px;">
    　　　　}</span><br> 　　　　<img
    src="https://img2018.cnblogs.com/blog/1524685/201811/1524685-20181101103724920-1741622876.png" alt></p>
<p><span style="font-size: 16px;"> 　　　　(<span style="color: #ff0000;">创建dispatcher</span></span><br><span
    style="font-size: 16px;"> 　　　　<span style="text-decoration: underline; color: #ff0000;">import {Dispatcher} from
      'flux'</span></span><br><span style="font-size: 16px;"> 　　　　<span
      style="text-decoration: underline; color: #ff0000;">const dispatcher = new Dispatcher()</span></span><br>
  <br><span style="font-size: 16px;"> 　　　　<span style="text-decoration: underline;">export default
      dispatcher)</span></span><br> <br><span style="font-size: 16px;"> 　　　　引入dispatcher</span><br><span
    style="font-size: 16px;"> 　　　　import dispathcer from '...'</span><br><span style="font-size: 16px;"> 　　　　<span
      style="color: #ff0000;">通过dispatcher的dispatch方法接收action</span></span><br><span style="font-size: 16px;">
    　　　　dispatcher.dispatch(action)</span><br> 　　<br><span style="font-size: 16px;"> 　　　　在dispatcher中接收</span><br><span
    style="font-size: 16px;"> 　　　　import</span><br><span style="font-size: 16px;"> 　　　　<span
      style="color: #ff0000;">dispatcher.<strong>register</strong></span>((action)=>{</span><br><span
    style="font-size: 16px;"> 　　　　<span
      style="color: #ff0000;">通过判断action.type类型，来调用Store的方法执行修改操作</span>，所以要引入store</span><br><span
    style="font-size: 16px;"> 　　　　　　switch (action.type){</span><br><span style="font-size: 16px;"> 　　　　　　　　case
    'CHANGE_ITEM'</span><br><span style="font-size: 16px;"> 　　　　　　　　　　Store.handleChange(action.value)</span><br><span
    style="font-size: 16px;"> 　　　　　　　　　　break;</span><br><span style="font-size: 16px;">
    　　　　　　　　default:</span><br><span style="font-size: 16px;"> 　　　　　　　　break;</span><br><span style="font-size: 16px;">
    　　　　　　}</span><br><span style="font-size: 16px;"> 　　　　})</span></p>
<p>　　　　<img src="https://img2018.cnblogs.com/blog/1524685/201811/1524685-20181101103842150-1341820238.png" alt></p>
<p><span style="font-size: 16px;"> 　　<span style="color: #ff0000;">3、数据发生改变，dispatcher通知store更改数据</span></span><br><span
    style="font-size: 16px;"> 　　　　handleChange(val){</span><br><span style="font-size: 16px;"> 　　　　　　this.state.…… =
    val</span><br><span style="font-size: 16px;"> 　　　　　　通过events中的emit触发 </span><br><span style="font-size: 16px;">
    　　　　　　this.emit('updata')</span><br><span style="font-size: 16px;"> 　　　　　}</span><br><span style="font-size: 16px;">
    　　　　　　定义一个方法，哪个组件需要调用数据，就调用这个方法</span><br><span style="font-size: 16px;"> 　　　　　　handleUpdate(fn){</span><br><span
    style="font-size: 16px;"> 　　　　　　　　this.on('updata',fn)</span><br><span style="font-size: 16px;"> 　　　　　　}</span></p>
<p>　　　　<img src="https://img2018.cnblogs.com/blog/1524685/201811/1524685-20181101103925281-552119324.png" alt></p>
<p><span style="font-size: 16px;"> 　　　<span style="color: #ff0000;">4、view中调用handleUpdate方法，来更改数据</span></span><br><span
    style="font-size: 16px;"> 　　　　Store.handleUpadate(this.handleUpdate.bind(this))</span><br> 　　　　　　<img
    src="https://img2018.cnblogs.com/blog/1524685/201811/1524685-20181101103952868-1233488892.png" alt></p>
<p><span style="font-size: 16px;"> 　　　　handleUpdate(){</span><br><span style="font-size: 16px;">
    　　　　　　this.setState(Store.getState())</span><br><span style="font-size: 16px;"> 　　　　}</span><br> <br> </p>
<p><br> </p>